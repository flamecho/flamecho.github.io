function owoBig(){let e=1,t="";if(document.getElementById("owo-big"))return void console.log("owo-big 元素已存在，无需重复创建");let o=document.createElement("div"),n=document.querySelector("body");o.id="owo-big",o.style.cssText="position: fixed; display: none; z-index: 9999; background: rgba(255, 255, 255, 0.95); border-radius: 10px; box-shadow: 0 0 20px rgba(0, 0, 0, 0.2); overflow: hidden; border: 2px solid #4CAF50; pointer-events: none;",n.appendChild(o);const i=document.getElementById("post-comment");if(!i)return void console.error("未找到 #post-comment 元素");new MutationObserver(i=>{for(let d=0;d<i.length;d++){let r=i[d].addedNodes,c="";2==r.length&&"OwO-body"==r[1].className&&(c=r[1],document.body.clientWidth<=768&&c.addEventListener("contextmenu",e=>e.preventDefault()),c.addEventListener("mouseover",function(i){e&&"IMG"==i.target.tagName&&(e=0,t&&clearTimeout(t),t=setTimeout(()=>{const t=i.target;if(!t.complete||0===t.naturalHeight)return void(e=1);let d=3*t.clientHeight,r=3*t.clientWidth,c=i.clientX-i.target.offsetLeft-(r-t.clientWidth)/2,s=i.clientY-i.target.offsetTop;c+r>n.clientWidth&&(c-=c+r-n.clientWidth+10),c<0&&(c=10),s+d>n.clientHeight&&(s-=s+d-n.clientHeight+10),s<0&&(s=10),o.style.cssText=`display:flex; justify-content:center; align-items:center; height:${d}px; width:${r}px; left:${c}px; top:${s}px; position:fixed; z-index:9999; background:rgba(255,255,255,0.95); border-radius:10px; box-shadow:0 0 20px rgba(0,0,0,0.2); overflow:hidden; border:2px solid #4CAF50; pointer-events:none;`,o.innerHTML=`<img src="${t.src}" style="max-width:100%; max-height:100%; object-fit:contain;">`},300))}),c.addEventListener("mouseout",function(n){n.relatedTarget&&"owo-big"!==n.relatedTarget.id&&(o.style.display="none",e=1,t&&clearTimeout(t))}),o.addEventListener("mouseenter",function(){o.style.display="none",e=1,t&&clearTimeout(t)}))}}).observe(i,{subtree:!0,childList:!0,attributes:!1,characterData:!1}),console.log("表情放大功能已初始化")}document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("post-comment"))owoBig();else{console.log("未找到 #post-comment 元素，可能是动态加载的");const e=new MutationObserver(function(t){document.getElementById("post-comment")&&(owoBig(),e.disconnect())});e.observe(document.body,{childList:!0,subtree:!0})}}),window.initOwOBig=function(){return!!document.getElementById("post-comment")&&(owoBig(),!0)};